<!DOCTYPE Html>
<html lang="en">
<head>
<title>KB4IT</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Asciidoctor 2.0.10">
    <meta name="description" content="KB4IT document">
    <meta name="author" content="KB4IT by t00mlabs.net">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="resources/uikit/css/uikit.min.css">
    <link rel="stylesheet" href="resources/uikit/css/coderay-asciidoctor.css">
    <link rel="stylesheet" href="resources/uikit/css/print.css" type="text/css" media="print" />
    <link rel="alternate" type="application/rss+xml" href="rss.xml" title="KB4IT Repository">
    <script src="resources/uikit/js/uikit.min.js"></script>
    <script src="resources/uikit/js/uikit-icons.min.js"></script>
</head>
<body>
<div>
<div id="container-1" class="uk-container uk-container-center">
    <div id="kb4it-menu" style="z-index: 980;" uk-sticky="show-on-up: true">
        <nav class="uk-navbar-container uk-border-rounded uk-card-hover" style="background-color: white;" uk-navbar>
            <div class="uk-navbar-left">
                <ul class="uk-navbar-nav">
                    <li class="uk-link-toggle uk-text-bolder">
                        <a class="uk-navbar-item uk-logo uk-link-heading" href="index.html"><span class="uk-label uk-label-danger">KB4IT</span></a>
                    </li>
                    <li>
                        <a <a class="uk-link-heading uk-text-bolder"href="#">Go To</a>
                        <div class="uk-navbar-dropdown">
                            <ul class="uk-nav uk-navbar-dropdown-nav">
                                <li class="uk-link-toggle uk-text-bolder">
                                    <a class="uk-link-heading" href="recents.html">Recents</a>
                                </li>
                                <li class="uk-link-toggle uk-text-bolder">
                                    <a class="uk-link-heading" href="bookmarks.html">Bookmarks</a>
                                </li>
                                <li class="uk-link-toggle uk-text-bolder">
                                    <a class="uk-link-heading" href="blog.html">Blog</a>
                                </li>
                                <li class="uk-link-toggle uk-text-bolder">
                                    <a class="uk-link-heading" href="all.html">All documents</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="uk-navbar-center">
                <ul class="uk-navbar-nav">
                    <!-- MENU CONTENTS :: START -->
                            <li>
                                <a class="uk-link-toggle uk-text-bolder" href="#">Contents</a>
                                <div class="uk-navbar-dropdown">
                                    <ul class="uk-nav uk-navbar-dropdown-nav">
<ul class="uk-nav uk-nav-default">
<li class="uk-link-toggle"><a class="uk-link-heading" href="#_metadata">Metadata</a></li>
<li class="uk-link-toggle"><a class="uk-link-heading" href="#_introduction">Introduction</a></li>
<li class="uk-link-toggle"><a class="uk-link-heading" href="#_procedure">Procedure</a>
<ul class="uk-nav-sub">
<li class="uk-link-toggle"><a class="uk-link-heading" href="#_check_running_applications">Check running applications</a></li>
<li class="uk-link-toggle"><a class="uk-link-heading" href="#_stop_database">Stop database</a></li>
</ul>
</li>
<li class="uk-link-toggle"><a class="uk-link-heading" href="#_notes_about_this_procedure">Notes about this procedure</a></li>
</ul>
                                    </ul>
                                </div>
                            </li>
                    <!-- MENU CONTENTS :: END -->
                </ul>
            </div>
            <div class="uk-navbar-right">
                <ul class="uk-navbar-nav">
                    <li>
                        <a <a class="uk-link-heading uk-text-bolder"href="#">Help</a>
                        <div class="uk-navbar-dropdown">
                            <ul class="uk-nav uk-navbar-dropdown-nav">
                                <li class="uk-link-toggle">
                                    <a class="uk-link-heading" href="help.html">Help</a>
                                </li>
                                <li class="uk-link-toggle">
                                    <a class="uk-link-heading" href="about.html">About</a>
                                </li>
                                <!--
                                <li class="uk-link-toggle uk-text-bolder">
                                    <a class="uk-link-heading" href="rss.xml"><span class="uk-margin-small-right" uk-icon="icon: rss"></span></a>
                                </li>
                                -->
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</div>
<div class="uk-container uk-container-center">
<h1 class="uk-heading-small uk-text-center">How to stop a DB2 database</h1>
<div hidden>
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_metadata">Metadata</a></li>
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_procedure">Procedure</a>
<ul class="sectlevel2">
<li><a href="#_check_running_applications">Check running applications</a></li>
<li><a href="#_stop_database">Stop database</a></li>
</ul>
</li>
<li><a href="#_notes_about_this_procedure">Notes about this procedure</a></li>
</ul>
</div>
<div id="kb4it-doc-metadata" class="uk-margin-small-bottom uk-card uk-card-body uk-card-hover uk-border-rounded uk-background-muted noprint" style="border: 1px solid black;">
<h2 id="_metadata">Metadata</h2>
<div class="uk-container">
<!-- Document Metadata section :: START -->
<!-- Use <ul uk-accordion active="0"> to show metadata section by default -->
<ul uk-accordion>
    <li>
        <a class="uk-accordion-title uk-text-primary" href="#">Show</a>
        <div class="uk-accordion-content">
            <table class="uk-table uk-table-small">
              <tr>
                <td><a class="uk-link-toggle" href="Author.html"><div class="uk-text-bold uk-text-secondary">Author</div></a></td>
                <td><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Author_Nora_Hobbs.html">
        <span class="uk-padding-small">Nora Hobbs</span>
    </a>
</div>
</div></td>
                <td><a class="uk-link-toggle" href="Category.html"><div class="uk-text-bold uk-text-secondary">Category</div></a></td>
                <td><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Category_Procedure.html">
        <span class="uk-padding-small">Procedure</span>
    </a>
</div>
</div></td>
                <td><a class="uk-link-toggle" href="Scope.html"><div class="uk-text-bold uk-text-secondary">Scope</div></a></td>
                <td><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Scope_Database_Administration.html">
        <span class="uk-padding-small">Database Administration</span>
    </a>
</div>
</div></td>
              </tr>
              <tr><td colspan="6"><hr></td></tr>
        <tr>
            <td>
                <a class="uk-link-text" href="Command.html">
                    <div class="uk-text-bolder uk-text-secondary uk-text-bold">Command</div>
                </a>
            </td>
            <td colspan="5"><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_awk.html">
        <span class="uk-padding-small">awk</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_db2.html">
        <span class="uk-padding-small">db2</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_db2admin.html">
        <span class="uk-padding-small">db2admin</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_db2start.html">
        <span class="uk-padding-small">db2start</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_db2stop.html">
        <span class="uk-padding-small">db2stop</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_grep.html">
        <span class="uk-padding-small">grep</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_ipcs.html">
        <span class="uk-padding-small">ipcs</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_kill.html">
        <span class="uk-padding-small">kill</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_print.html">
        <span class="uk-padding-small">print</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Command_ps.html">
        <span class="uk-padding-small">ps</span>
    </a>
</div>
</div></td>
        </tr>
        <tr>
            <td>
                <a class="uk-link-text" href="Database.html">
                    <div class="uk-text-bolder uk-text-secondary uk-text-bold">Database</div>
                </a>
            </td>
            <td colspan="5"><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Database_DB2.html">
        <span class="uk-padding-small">DB2</span>
    </a>
</div>
</div></td>
        </tr>
        <tr>
            <td>
                <a class="uk-link-text" href="Status.html">
                    <div class="uk-text-bolder uk-text-secondary uk-text-bold">Status</div>
                </a>
            </td>
            <td colspan="5"><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Status_Released.html">
        <span class="uk-padding-small">Released</span>
    </a>
</div>
</div></td>
        </tr>
        <tr>
            <td>
                <a class="uk-link-text" href="Tag.html">
                    <div class="uk-text-bolder uk-text-secondary uk-text-bold">Tag</div>
                </a>
            </td>
            <td colspan="5"><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_start.html">
        <span class="uk-padding-small">start</span>
    </a>
</div>
<div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Tag_stop.html">
        <span class="uk-padding-small">stop</span>
    </a>
</div>
</div></td>
        </tr>
        <tr>
            <td>
                <a class="uk-link-text" href="Team.html">
                    <div class="uk-text-bolder uk-text-secondary uk-text-bold">Team</div>
                </a>
            </td>
            <td colspan="5"><div class="uk-flex uk-flex-row uk-flex-wrap"><div class="uk-link-toggle uk-text-muted">
    <a class="uk-link-heading" href="Team_DBA.html">
        <span class="uk-padding-small">DBA</span>
    </a>
</div>
</div></td>
        </tr>
                <tr>
                    <td colspan="6" align="center">
                        <!-- View Asciidoc Source Button :: START -->
                        <a class="uk-button uk-button-danger" href="#modal-full" uk-toggle>Source</a>
                        <div id="modal-full" class="uk-modal-full" uk-modal>
                            <div class="uk-modal-dialog">
                                <button class="uk-modal-close-full uk-close-large uk-background-muted" type="button" uk-close></button>
                                <div class="uk-grid-collapse uk-child-width-expand@s uk-flex-middle" uk-grid>
                                    <div class="uk-padding-large uk-background-muted">
                                        <div class="uk-text-lead">Asciidoc Source</div>
                                        <div class="uk-text-meta">SAP-BC-DB2-STOP-DATABASE.adoc&nbsp;<a onclick="copyToClipboard()" class="uk-icon-link uk-margin-small-right" uk-icon="copy"></a></div>
                                        <textarea id="source-code" class="uk-width-1-1 uk-height-viewport">= How to stop a DB2 database
:Author:        Nora Hobbs
:Category:      Procedure
:Status:        Released
:Scope:         Database Administration
:Team:          DBA
:Tag:           start, stop
:Database:      Oracle
:Command:       db2, kill, ps, ipcs, db2start, db2admin, db2stop, grep, awk, print
:Database:      DB2

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE


== Introduction
Sometimes, _db2stop_ command cannot stop the database and it returns the following message:

----
The database manager was not stopped because databases are still active.
----


== Procedure


=== Check running applications

Login as db2<sid> and execute the following commands:

`db2 list application show detail`

=== Stop database
Stop all of them:

`db2 force application all` followed by `db2stop`

Then, check if there are still DB2 processes:

`ps -ef | grep db2crt`

If any, kill'em all with the `kill` command.

== Notes about this procedure

WARNING: This procedure is very *dangerous*. Try to avoid it.
</textarea>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- View Source Button :: END -->
                    </td>
                </tr>
            </table>
        </div>
    </li>
</ul> <!-- Document Metadata section :: END -->
</div>
</div>
<div class="uk-margin-small-bottom uk-card uk-card-body uk-card-hover uk-border-rounded">
<h2 id="_introduction">Introduction</h2>
<div class="uk-container">
<div class="paragraph">
<p>Sometimes, <em>db2stop</em> command cannot stop the database and it returns the following message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The database manager was not stopped because databases are still active.</pre>
</div>
</div>
</div>
</div>
<div class="uk-margin-small-bottom uk-card uk-card-body uk-card-hover uk-border-rounded">
<h2 id="_procedure">Procedure</h2>
<div class="uk-container">
<div class="sect2 uk-card-hover uk-border-rounded uk-padding-small">
<h3 id="_check_running_applications">Check running applications</h3>
<div class="paragraph">
<p>Login as db2&lt;sid&gt; and execute the following commands:</p>
</div>
<div class="paragraph">
<p><code>db2 list application show detail</code></p>
</div>
</div>
<div class="sect2 uk-card-hover uk-border-rounded uk-padding-small">
<h3 id="_stop_database">Stop database</h3>
<div class="paragraph">
<p>Stop all of them:</p>
</div>
<div class="paragraph">
<p><code>db2 force application all</code> followed by <code>db2stop</code></p>
</div>
<div class="paragraph">
<p>Then, check if there are still DB2 processes:</p>
</div>
<div class="paragraph">
<p><code>ps -ef | grep db2crt</code></p>
</div>
<div class="paragraph">
<p>If any, kill&#8217;em all with the <code>kill</code> command.</p>
</div>
</div>
</div>
</div>
<div class="uk-margin-small-bottom uk-card uk-card-body uk-card-hover uk-border-rounded">
<h2 id="_notes_about_this_procedure">Notes about this procedure</h2>
<div class="uk-container">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i uk-icon="warning" class="uk-text-warning" title="Warning"></i>
</td>
<td class="content">
This procedure is very <strong>dangerous</strong>. Try to avoid it.
</td>
</tr>
</table>
</div>
</div>
</div>        </div>
    </div>
    <!-- CONTENTS (Document) :: END -->
</div>
<div><!-- FOOTER :: START -->
</div><!-- FOOTER :: END -->
<script>
<!-- Necessary javascript for filtering results -->
<!-- Hack found in: https://codepen.io/acidrums4/pen/GBpYbO -->
var input = document.getElementById('text_filter');
var filter = document.getElementById('filter');

input.addEventListener( 'keyup', function(event)
{
    if ( input.value == "" )
    {
        filter.setAttribute( 'uk-filter-control', '[data-*=\'#nodata#\']' );
    }

    else
    {
        filter.setAttribute( 'uk-filter-control', 'filter:[data-title*=\'' + input.value + '\'i]' );
    }

    filter.click();
});
</script>
<script>
function copyToClipboard() {
  var copyText = document.getElementById("source-code");
  copyText.select();
  copyText.setSelectionRange(0, 99999)
  document.execCommand("copy");
  alert("Text copied to clipboard");
}
</script>
<!-- GRID LAYOUT :: END -->
</body>
</html>
