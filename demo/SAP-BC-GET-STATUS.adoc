= Get SAP status from command line
:Author:        Tomás Vírseda
:Scope:         SAP Administration
:Category:      Note
:Status:        Draft
:Team:          SAP
:Tag:           shell scripting, sapcontrol
:Command:       sapcontrol, saphostctrl
:Product:       SAP Netweaver

// END-OF-HEADER. DO NOT MODIFY OR DELETE THIS LINE

== Introduction
Useful commands to check the availability of a SAP instance or other SAP service running in a host


== Procedure

Login as <sid>adm.

TIP: `NN` stands for 2-digits Instance Number

=== ABAP

Get SAP Kernel version:

`sapcontrol -nr NN -function GetVersionInfo`

Output:

----
18.07.2010 18:35:10
GetVersionInfo
OK
Filename, VersionInfo, Time
/usr/sap/DEV/DVEBMGS20/exe/sapstartsrv, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:44:34
/usr/sap/DEV/DVEBMGS20/exe/disp+work, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:50:46
/usr/sap/DEV/DVEBMGS20/exe/gwrd, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:08:30
/usr/sap/DEV/DVEBMGS20/exe/msg_server, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:08:25
/usr/sap/DEV/DVEBMGS20/exe/dboraslib.so, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:07:39
/usr/sap/DEV/DVEBMGS20/exe/dbdb6slib.so, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:07:38
/usr/sap/DEV/DVEBMGS20/exe/dbsybslib.so, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:07:39
/usr/sap/DEV/DVEBMGS20/exe/enserver, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:08:21
/usr/sap/DEV/DVEBMGS20/exe/enq_server, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:08:22
/usr/sap/DEV/DVEBMGS20/exe/icman, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:08:30
/usr/sap/DEV/DVEBMGS20/exe/sapwebdisp, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:08:30
/usr/sap/DEV/DVEBMGS20/exe/jcontrol, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:09:08
/usr/sap/DEV/DVEBMGS20/exe/jlaunch, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:25:19
/usr/sap/DEV/DVEBMGS20/exe/jstart, 749, patch 301, changelist 1779613, RKS compatibility level 0, optU (Aug  4 2010, 17:07:29), sun_64, 2010 08 04 17:34:49
----

=== JAVA

Get Java Instance details:

`sapcontrol -nr NN -function GetProcessList`

`sapcontrol -nr NN -function J2EEGetProcessList`

`sapcontrol -nr NN -function GetSystemInstanceList`

=== Database

Get database status:

`/usr/sap/hostctrl/exe/saphostctrl -function GetDatabaseStatus -dbname DEV -dbtype ora`

.Output:

----
Database Status: Running
    Component name: Instance (Instance), Status: Running (Instance is started)
    Component name: Database (Database), Status: Running (Database is in normal state)
    Component name: Archiver (Archiver), Status: Running (Archiver is started)
    Component name: Listener (Listener), Status: Running (Listener is started)
----
